<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="./style.css">
    <title>Tile Wars</title>
</head>
<body>
    <div id="main-menu">
      <div id="tutorial">
        <h1>Welcome to Tile Wars!</h1>
        <p>
          Tile Wars is a team-based strategy game.<br>
          Move around the grid, claim tiles for your team, and chat with other players.<br>
          Every 3 seconds, you earn a tile (up to 5). Use tiles to claim territory.<br>
          <br>
          Controls:<br>
          <b>WASD</b> to move<br>
          <b>Q</b> to place a tile<br>
          <b>Space</b> to switch team<br>
          <br>
          Work together to control the board!
        </p>
        <button id="start-game-btn">Start / Join Game</button>
      </div>
    </div>

    <h1>Tile Wars</h1>

    <!-- Tile Bank and Timer UI -->
    <div id="tilebank-container">
        <div id="tilebank">
            Tiles: <span id="tile-count">0</span> / 5
        </div>
        <div id="timer">
            Next tile in: <span id="timer-count">3</span>s
        </div>
    </div>

    <div class="grid-container">
        <div id="grid"></div>
    </div>

    <!--DG964, CHALLENGE MENU + CLOSING BOX + MODE BUTTON-->
    <div class="top-controls">
        <button id="modeButton">Mode: Sabotage</button>
        <div class="challenge-menu">
            <button id="challengeDropdown">Challenges â–¼</button>
            <div id="challengeList" class="dropdown-content">
                <button onclick="startChallenge('typing')">Typing Challenge</button>
                <button onclick="startChallenge('colorTest')">Color Test Challenge</button>
                <button onclick="startChallenge('memory')">Memory Challenge</button>
            </div>
        </div>
    </div>
    <div id="challengeModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <div id="challengeContainer"></div>
        </div>
    </div>
    <script src="./challenges.js" defer></script>
    <script src="./simulation.js" defer></script>
    <script src="./modes.js" defer></script>

    <!-- Chat UI -->
    <div id="chat-container">
        <div id="chat-messages"></div>
        <form id="chat-form">
            <input id="chat-input" type="text" placeholder="Type a message..." maxlength="200" autocomplete="off" />
            <button type="submit">Send</button>
        </form>
    </div>
    <script>
        const challengeDropdown = document.getElementById('challengeDropdown');
        const challengeList = document.getElementById('challengeList');
        challengeDropdown.addEventListener('click', () => {
            challengeList.style.display = challengeList.style.display === 'block' ? 'none' : 'block';
        });
        document.addEventListener('click', (e) => {
            if (!challengeDropdown.contains(e.target) && !challengeList.contains(e.target)) {
                challengeList.style.display = 'none';
            }
        });
    </script>
</body>
</html>

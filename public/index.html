<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="./style.css">
    <title>Tile Wars</title>
</head>
<body>
    <h1>Tile Wars</h1>

    <!-- Tile Bank and Timer UI -->
    <div id="tilebank-container" style="display:flex;align-items:center;gap:20px;margin-bottom:10px; position: relative; z-index: 1001;">
        <div id="tilebank" style="font-size:18px;color:#333;background:#eee;padding:6px 18px;border-radius:8px;box-shadow:0 2px 6px #0002;">
            Tiles: <span id="tile-count">0</span> / 5
        </div>
        <div id="timer" style="font-size:16px;color:#555;background:#f5f5f5;padding:6px 18px;border-radius:8px;box-shadow:0 2px 6px #0001;">
            Next tile in: <span id="timer-count">3</span>s
        </div>
    </div>

    <div class="grid-container">
        <div id="grid"></div>
    </div>

    <!--DG964, CHALLENGE MENU + CLOSING BOX-->
    <div class="challenge-menu" style="
        position: absolute;
        top: 150px; /* moved down to leave space for tile bank */
        left: 10px;
        z-index: 1000;
    ">
        <button id="challengeDropdown" style="
            background: #eee;
            border: 1px solid #444;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        ">Challenges â–¼</button>
        <div id="challengeList" class="dropdown-content" style="
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: #f0f0f0;
            border: 1px solid #444;
            border-radius: 6px;
            padding: 4px 0;
            box-shadow: 0 2px 6px #0003;
            min-width: 160px;
            z-index: 1000;
        ">
            <button onclick="startChallenge('typing')" style="width:100%; padding:6px 12px; text-align:left; border:none; background:none; cursor:pointer;">Typing Challenge</button>
            <button onclick="startChallenge('colorTest')" style="width:100%; padding:6px 12px; text-align:left; border:none; background:none; cursor:pointer;">Color Test Challenge</button>
            <button onclick="startChallenge('memory')" style="width:100%; padding:6px 12px; text-align:left; border:none; background:none; cursor:pointer;">Memory Challenge</button>
        </div>
    </div>
    <div id="challengeModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <div id="challengeContainer"></div>
        </div>
    </div>
    <script src="./challenges.js" defer></script>
    <script src="./simulation.js" defer></script>
    <script src="./modes.js" defer></script>

    <!-- Chat UI -->
    <div id="chat-container" style="position:fixed;bottom:0;left:0;width:100%;background:#222;padding:10px 0;z-index:1000;">
        <div id="chat-messages" style="max-height:150px;overflow-y:auto;background:#111;color:#fff;padding:5px 10px;font-size:14px;"></div>
        <form id="chat-form" style="display:flex;gap:5px;padding:5px 10px;">
            <input id="chat-input" type="text" placeholder="Type a message..." style="flex:1;" maxlength="200" autocomplete="off" />
            <button type="submit">Send</button>
        </form>
    </div>
    <script>
        const challengeDropdown = document.getElementById('challengeDropdown');
        const challengeList = document.getElementById('challengeList');
        challengeDropdown.addEventListener('click', () => {
            challengeList.style.display = challengeList.style.display === 'block' ? 'none' : 'block';
        });
        document.addEventListener('click', (e) => {
            if (!challengeDropdown.contains(e.target) && !challengeList.contains(e.target)) {
                challengeList.style.display = 'none';
            }
        });
    </script>
</body>
</html>
